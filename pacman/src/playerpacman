import pygame

from player import Player
from Constants import *

class Pacman (Player):
    images = pygame.image.load ("pacman1.png")
    

    def __init__ (self):
        '''in - (self)'''
        self.surface = Pacman.images [0]
        self.isFirstPic = True
        self.frame = 0
        self.rect = self.surface.get_rect ()
        self.rect.left = 315
        self.rect.top = 315
        self.direction = 0
        self.speed = 5
        self.moveUp = self.moveLeft = self.moveDown = self.moveRight = False
        self.score = 0
        self.lives = 3

    def reset (self):
        '''in - (self)
        Resets pacman's position, movement, direction, and sprite.'''
        self.surface = Pacman.images [0]
        self.isFirstPic = True
        self.frame = 0
        self.rect.left = 315
        self.rect.top = 315
        self.direction = 0
        self.moveUp = self.moveLeft = self.moveDown = self.moveRight = False

    def getSurface (self):
        '''in - (self)
        Animates and rotates pacman sprite.'''
        self.frame += 1
        if self.frame == 3:
            self.isFirstPic = not self.isFirstPic
            self.frame = 0
            
        if self.direction == 0:
            self.surface = Pacman.images [self.isFirstPic]
        elif self.direction == 1:
            self.surface = pygame.transform.rotate (Pacman.images [self.isFirstPic], 90)
        elif self.direction == 2:
            self.surface = pygame.transform.rotate (Pacman.images [self.isFirstPic], 180)
        elif self.direction == 3:
            self.surface = pygame.transform.rotate (Pacman.images [self.isFirstPic], 270)

    def move (self, walls):
        '''in - (self, list of walls)
        Determines what direction to move in and moves pacman.'''
        if self.moveUp and self.canMove (0, walls):
            Player.move (self, 0)
        if self.moveLeft and self.canMove (1, walls):
            Player.move (self, 1)
        if self.moveDown and self.canMove (2, walls):
            Player.move (self, 2)
        if self.moveRight and self.canMove (3, walls):
            Player.move (self, 3)